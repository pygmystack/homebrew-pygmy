# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Pygmy < Formula
  desc "amazee.io's local development helper tool"
  homepage "https://github.com/pygmystack/pygmy"
  version "0.12.0"

  head do
    url "https://github.com/pygmystack/pygmy.git", branch: "main"
    depends_on "go" => :build if build.head?
  end
  
  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/pygmystack/pygmy/releases/download/v0.12.0/pygmy_0.12.0_darwin_arm64.tar.gz"
      sha256 "e4c28bb3a0534091af7e972d15e37add0566ff111cf04184df5e0f3bd0c22d42"
    end
    if Hardware::CPU.intel?
      url "https://github.com/pygmystack/pygmy/releases/download/v0.12.0/pygmy_0.12.0_darwin_amd64.tar.gz"
      sha256 "63f7faf99d28d8ab97c37dc9d95125f43b6149bd516e4d2058851461ae78eefd"
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/pygmystack/pygmy/releases/download/v0.12.0/pygmy_0.12.0_linux_amd64.tar.gz"
      sha256 "21b67874944fdd40ad65543ae0e177808e695406d261aeb8f83db855e0bc1840"
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/pygmystack/pygmy/releases/download/v0.12.0/pygmy_0.12.0_linux_arm64.tar.gz"
      sha256 "7f607ee3f5f0fa939ea9b6d87faa7e27b873e20ec291f2d24d9a3bc0c1a85cb5"
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/pygmystack/pygmy/releases/download/v0.12.0/pygmy_0.12.0_linux_arm.tar.gz"
      sha256 "48e03c9481c6f28cfd094a0ac27778631ebd5cafd20c70bbd28fd4cb8fefff68"
    end
  end

  def install
    if build.head?
        system "go", "build", "-o", "pygmy"
    end
    bin.install "pygmy"
  end
  
  test do
    system "#{bin}/pygmy version"
  end
end
